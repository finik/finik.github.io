<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>iOS Ad-hoc distribution using Amazon S3 | Dmitry Fink</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Why?
Every iOS developer at some point in their life is challenged with a task to distribute their awesome app to a group of loyal beta testers. Apple does not make it easy. The reasons for this are c">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS Ad-hoc distribution using Amazon S3">
<meta property="og:url" content="http://finik.net/2016/08/28/iOS-Ad-hoc-distribution-using-Amazon-S3/">
<meta property="og:site_name" content="Dmitry Fink">
<meta property="og:description" content="Why?
Every iOS developer at some point in their life is challenged with a task to distribute their awesome app to a group of loyal beta testers. Apple does not make it easy. The reasons for this are c">
<meta property="og:image" content="/images/s3-ad-hoc/iphone.png">
<meta property="og:image" content="/images/s3-ad-hoc/step1.png">
<meta property="og:image" content="/images/s3-ad-hoc/step2.png">
<meta property="og:image" content="/images/s3-ad-hoc/step3.png">
<meta property="og:image" content="/images/s3-ad-hoc/step4.png">
<meta property="og:image" content="/images/s3-ad-hoc/step5.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS Ad-hoc distribution using Amazon S3">
<meta name="twitter:description" content="Why?
Every iOS developer at some point in their life is challenged with a task to distribute their awesome app to a group of loyal beta testers. Apple does not make it easy. The reasons for this are c">
<meta name="twitter:creator" content="@finik">
<link rel="publisher" href="102647827171370750000">

  
    <link rel="alternative" href="/atom.xml" title="Dmitry Fink" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17764337-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Dmitry Fink</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/resume">Resume</a>
        
          <a class="main-nav-link" href="/contact">Contact</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://finik.net"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-iOS-Ad-hoc-distribution-using-Amazon-S3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/28/iOS-Ad-hoc-distribution-using-Amazon-S3/" class="article-date">
  <time datetime="2016-08-29T04:50:35.000Z" itemprop="datePublished">Aug 28 2016</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      iOS Ad-hoc distribution using Amazon S3
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Why?">Why?</h2>
<p>Every iOS developer at some point in their life is challenged with a task to distribute their awesome app to a group of loyal beta testers. Apple does not make it easy. The reasons for this are clear. We all care about security and greatly appreciate the fact that iOS platform is much more secure than its main competitor, but it is still a problem that needs to be solved.  There are services out there that try to automate the ad-hoc distribution process, but sometimes it is not desirable or even possible to use them. Thus, there is a need to bake an in-house distribution system.</p>
<p>To make the ad-hoc distribution work, one must:</p>
<ul>
<li>Upload the IPA file to a place where it can be downloaded</li>
<li>Generate a special plist xml file, referring to the IPA above. This file must be accessible over https!</li>
<li>Generate an html file with a special <strong>Download</strong> link, pointing to the plist file above. This is the page users will see</li>
</ul>
<p>Throughout this tutorial, we are going to use an application called Dishero as an example. We will host it directly on S3, without spinning up machines or configuring http servers. The result will look similar to this:</p>
<p><img src="/images/s3-ad-hoc/iphone.png" alt=""></p>
<p>We will produce a nice webpage, hosted on S3 that will provide details and a one-click install for our application.</p>
<h2 id="Prerequisites">Prerequisites</h2>
<h3 id="Create_an_Ad-hoc_distribution_profile">Create an Ad-hoc distribution profile</h3>
<p>First of all you will need to create a distribution profiles in iTunes Connect.</p>
<p>Ad-Hoc distribution limits the the ability to install your application only on specific devices that have to be pre-registered. Instruct your beta users to visit <a href="http://whatsmyudid.com/" target="_blank" rel="external">http://whatsmyudid.com/</a> and to follow the instructions there to obtain UDID (Unique Device ID) for their device and send it to you.</p>
<p>Follow the pictures below to create an Ad-Hoc provisioning profile, and add all the devices to it. Download it once ready and install in your local keychain by double-clicking on it.</p>
<p><img src="/images/s3-ad-hoc/step1.png" alt=""><br><img src="/images/s3-ad-hoc/step2.png" alt=""><br><img src="/images/s3-ad-hoc/step3.png" alt=""><br><img src="/images/s3-ad-hoc/step4.png" alt=""><br><img src="/images/s3-ad-hoc/step5.png" alt=""></p>
<h3 id="Create_a_bucket_on_S3_and_enable_web_hosting_on_it">Create a bucket on S3 and enable web hosting on it</h3>
<p>You will also need a dedicated bucket on S3 for this. Make sure you enable Web Hosting on your bucket as shown in the picture below.<br><strong>Bonus</strong>: If you want to have your download page to be at a nice URL (we are using download.dishero.com for this example), you have to do a few tricks:</p>
<ol>
<li>Name your bucket accordingly - <strong>download.dishero.com</strong></li>
<li>In your DNS, configure a CNAME record <strong>download.dishero.com</strong> to point to <strong>download.dishero.com</strong>.s3.amazonaws.com.</li>
</ol>
<h3 id="Install_S3cmd">Install S3cmd</h3>
<p>We will need <a href="http://s3tools.org/" target="_blank" rel="external">s3cmd</a> to upload the files to S3 and set the right permissions.</p>
<p>Installing it using <a href="http://brew.sh/" target="_blank" rel="external">homebrew</a> is easy:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew <span class="operator"><span class="keyword">install</span> s3cmd</span></div></pre></td></tr></table></figure>

<p>So is installing it using python’s pip:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">sudo</span> pip install s3cmd</div></pre></td></tr></table></figure>

<p>…or you can just follow the manual process described on s3cmd website.</p>
<p>Once you have it installed, run it</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">s3cmd</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">configure</span></div></pre></td></tr></table></figure>

<p>and enter your AWS credentials when prompted. Credentials will be saved and we won’t need to state them explicitly anymore.</p>
<h2 id="Where_the_magic_happens">Where the magic happens</h2>
<p>The script below does all the heavy lifting. It generates index.html, proper plist file and uploads them along with the IPA itself to S3.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="xml">#!/bin/bash</span></div><div class="line">set -e</div><div class="line"></div><div class="line">PROJECT="Dishero"</div><div class="line">FILE=$1</div><div class="line">TARGET=$2</div><div class="line">VERSION=$3</div><div class="line">BUILD=$4</div><div class="line">BUILD_TIME=`stat -f "%Sm" -t "%Y-%m-%d %H:%M:%S" $1`</div><div class="line">SECURE_TARGET="https://s3-us-west-2.amazonaws.com/${TARGET}"</div><div class="line"></div><div class="line">echo "Generating ${PROJECT}-${VERSION}-${BUILD}.plist"</div><div class="line">cat &gt; ./${PROJECT}-${VERSION}-${BUILD}.plist <span class="tag">&lt;&lt;<span class="attribute">PLIST_DELIM</span></span></div><div class="line">&lt;?<span class="attribute">xml</span> <span class="attribute">version</span>=<span class="value">"1.0"</span> <span class="attribute">encoding</span>=<span class="value">"UTF-8"</span><span class="value">?</span>&gt;</div><div class="line"><span class="doctype">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">plist</span> <span class="attribute">version</span>=<span class="value">"1.0"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">dict</span>&gt;</span></div><div class="line"> <span class="tag">&lt;<span class="title">key</span>&gt;</span>items<span class="tag">&lt;/<span class="title">key</span>&gt;</span></div><div class="line"> <span class="tag">&lt;<span class="title">array</span>&gt;</span></div><div class="line"> </div><div class="line">  <span class="tag">&lt;<span class="title">dict</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="title">key</span>&gt;</span>assets<span class="tag">&lt;/<span class="title">key</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="title">array</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">dict</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="title">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="title">key</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="title">string</span>&gt;</span>software-package<span class="tag">&lt;/<span class="title">string</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="title">key</span>&gt;</span>url<span class="tag">&lt;/<span class="title">key</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="title">string</span>&gt;</span>http://${TARGET}/${PROJECT}-${VERSION}-${BUILD}.ipa<span class="tag">&lt;/<span class="title">string</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="title">dict</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="title">array</span>&gt;</span></div><div class="line">  </div><div class="line">   <span class="tag">&lt;<span class="title">key</span>&gt;</span>metadata<span class="tag">&lt;/<span class="title">key</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="title">dict</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">key</span>&gt;</span>bundle-identifier<span class="tag">&lt;/<span class="title">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">string</span>&gt;</span>${BUNDLE}<span class="tag">&lt;/<span class="title">string</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">key</span>&gt;</span>bundle-version<span class="tag">&lt;/<span class="title">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">string</span>&gt;</span>${VERSION}<span class="tag">&lt;/<span class="title">string</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="title">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">string</span>&gt;</span>software<span class="tag">&lt;/<span class="title">string</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">key</span>&gt;</span>subtitle<span class="tag">&lt;/<span class="title">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">string</span>&gt;</span>${PROJECT}<span class="tag">&lt;/<span class="title">string</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">key</span>&gt;</span>title<span class="tag">&lt;/<span class="title">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">string</span>&gt;</span>${PROJECT}<span class="tag">&lt;/<span class="title">string</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="title">dict</span>&gt;</span></div><div class="line"> </div><div class="line">  <span class="tag">&lt;/<span class="title">dict</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="title">array</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">dict</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">plist</span>&gt;</span></div><div class="line"></div><div class="line">PLIST_DELIM</div><div class="line"></div><div class="line">echo "Generating index.html"</div><div class="line">cat &gt; ./index.html <span class="tag">&lt;&lt;<span class="attribute">INDEX_DELIM</span></span></div><div class="line">&lt;!<span class="attribute">DOCTYPE</span> <span class="attribute">html</span> <span class="attribute">PUBLIC</span> "<span class="attribute">-</span>//<span class="attribute">W3C</span>//<span class="attribute">DTD</span> <span class="attribute">XHTML</span> <span class="attribute">1.0</span> <span class="attribute">Transitional</span>//<span class="attribute">EN</span>" "<span class="attribute">http:</span>//<span class="attribute">www.w3.org</span>/<span class="attribute">TR</span>/<span class="attribute">xhtml1</span>/<span class="attribute">DTD</span>/<span class="attribute">xhtml1-transitional.dtd</span>"&gt;</div><div class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">xmlns</span>=<span class="value">"http://www.w3.org/1999/xhtml"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"Content-Type"</span> <span class="attribute">content</span>=<span class="value">"text/html; charset=UTF-8"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span> <span class="attribute">content</span>=<span class="value">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">title</span>&gt;</span>${PROJECT} ${VERSION} (${BUILD})<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line"><span class="tag">body</span> <span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#fff</span></span></span>;<span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">0</span></span></span>;<span class="rule"><span class="attribute">padding</span>:<span class="value"><span class="number">0</span></span></span>;<span class="rule"><span class="attribute">font-family</span>:<span class="value">arial,helvetica,sans-serif</span></span>;<span class="rule"><span class="attribute">text-align</span>:<span class="value">center</span></span>;<span class="rule"><span class="attribute">padding</span>:<span class="value"><span class="number">10px</span></span></span>;<span class="rule"><span class="attribute">color</span>:<span class="value"><span class="hexcolor">#333</span></span></span>;<span class="rule"><span class="attribute">font-size</span>:<span class="value"><span class="number">16px</span></span></span>;<span class="rule">}</span></span></div><div class="line"><span class="id">#container</span> <span class="rules">{<span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">300px</span></span></span>;<span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">0</span> auto</span></span>;<span class="rule">}</span></span></div><div class="line"><span class="tag">h1</span> <span class="rules">{<span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">0</span></span></span>;<span class="rule"><span class="attribute">padding</span>:<span class="value"><span class="number">0</span></span></span>;<span class="rule"><span class="attribute">font-size</span>:<span class="value"><span class="number">14px</span></span></span>;<span class="rule">}</span></span></div><div class="line"><span class="tag">p</span> <span class="rules">{<span class="rule"><span class="attribute">font-size</span>:<span class="value"><span class="number">13px</span></span></span>;<span class="rule">}</span></span></div><div class="line"><span class="class">.link</span> <span class="rules">{<span class="rule"><span class="attribute">background</span>:<span class="value"><span class="hexcolor">#ecf5ff</span></span></span>;<span class="rule"><span class="attribute">border-top</span>:<span class="value"><span class="number">1px</span> solid <span class="hexcolor">#fff</span></span></span>;<span class="rule"><span class="attribute">border</span>:<span class="value"><span class="number">1px</span> solid <span class="hexcolor">#dfebf8</span></span></span>;<span class="rule"><span class="attribute">margin-top</span>:<span class="value">.<span class="number">5em</span></span></span>;<span class="rule"><span class="attribute">padding</span>:<span class="value">.<span class="number">3em</span></span></span>;<span class="rule">}</span></span></div><div class="line"><span class="class">.link</span> <span class="tag">a</span> <span class="rules">{<span class="rule"><span class="attribute">text-decoration</span>:<span class="value">none</span></span>;<span class="rule"><span class="attribute">font-size</span>:<span class="value"><span class="number">15px</span></span></span>;<span class="rule"><span class="attribute">display</span>:<span class="value">block</span></span>;<span class="rule"><span class="attribute">color</span>:<span class="value"><span class="hexcolor">#069</span></span></span>;<span class="rule">}</span></span></div><div class="line"><span class="class">.warning</span> <span class="rules">{<span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">12px</span></span></span>; <span class="rule"><span class="attribute">color</span>:<span class="value"><span class="hexcolor">#F00</span></span></span>; <span class="rule"><span class="attribute">font-weight</span>:<span class="value">bold</span></span>; <span class="rule"><span class="attribute">margin</span>:<span class="value"><span class="number">10px</span> <span class="number">0px</span></span></span>;<span class="rule">}</span></span></div><div class="line"><span class="tag">&lt;/<span class="title">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"container"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">h1</span>&gt;</span>iOS 7.0 and newer:<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">p</span>&gt;</span>${PROJECT} Beta ${VERSION} (${BUILD})<span class="tag">&lt;/<span class="title">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">p</span>&gt;</span>Built on ${BUILD_TIME}<span class="tag">&lt;/<span class="title">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"link"</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"itms-services://?action=download-manifest;url=${SECURE_TARGET}/${PROJECT}-${VERSION}-${BUILD}.plist"</span>&gt;</span>Tap to install!<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">p</span>&gt;</span><span class="tag">&lt;<span class="title">strong</span>&gt;</span>Link didn't work?<span class="tag">&lt;/<span class="title">strong</span>&gt;</span><span class="tag">&lt;<span class="title">br</span> /&gt;</span>Make sure you're visiting this page on your device, not your computer.<span class="tag">&lt;/<span class="title">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div><div class="line">INDEX_DELIM</div><div class="line"></div><div class="line">echo "Uploading ${PROJECT}-${VERSION}-${BUILD}.ipa to s3://${TARGET}"</div><div class="line">s3cmd put -P $FILE s3://${TARGET}/${PROJECT}-${VERSION}-${BUILD}.ipa</div><div class="line">echo "Uploading ${PROJECT}-${VERSION}-${BUILD}.plist to s3://${TARGET}"</div><div class="line">s3cmd put -P ${PROJECT}-${VERSION}-${BUILD}.plist s3://${TARGET}/${PROJECT}-${VERSION}-${BUILD}.plist</div><div class="line">echo "Uploading index.html to s3://${TARGET}"</div><div class="line">s3cmd put -P index.html s3://${TARGET}/</div></pre></td></tr></table></figure>

<p>Executing the script requires only a few parameters: an IPA file, a bucket path, a version and a build</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor"># $PATH_TO_SCRIPT/upload_to_s3.sh <span class="title">&lt;IPA_FILE&gt;</span> <span class="title">&lt;TARGET_PATH&gt;</span> <span class="title">&lt;VERSION&gt;</span> <span class="title">&lt;BUILD&gt;</span></span></div><div class="line">$PATH_TO_SCRIPT/upload_to_s3<span class="variable">.sh</span> Dishero<span class="variable">.ipa</span> download<span class="variable">.dishero</span><span class="variable">.com</span>/beta <span class="number">2.5</span><span class="number">.0</span> <span class="number">1795</span></div></pre></td></tr></table></figure>

<p>The command above will make the download page available at <a href="http://download.dishero.com/beta" target="_blank" rel="external">http://download.dishero.com/beta</a>. Alternatively, if DNS is not under your control and you can’t do CNAME tricks to get a proper hostname, you will have to point your users to <a href="https://s3-us-west-2.amazonaws.com/bucketname/path/" target="_blank" rel="external">https://s3-us-west-2.amazonaws.com/bucketname/path/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://finik.net/2016/08/28/iOS-Ad-hoc-distribution-using-Amazon-S3/" data-id="8hqg6yxf6sruwtpm" class="article-share-link">Share</a>
      
        <a href="http://finik.net/2016/08/28/iOS-Ad-hoc-distribution-using-Amazon-S3/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aws-build-ios/">aws, build, ios</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/08/30/Managing-iOS-build-configurations/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Managing iOS build configurations
        
      </div>
    </a>
  
  
    <a href="/2014/10/30/bidi/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Typing bidi text</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
      <div class="widget-wrap">
    <h3 class="widget-title">About</h3>
    <div class="widget">
      <img src="/images/portrait.jpg"><br>
      CTO and Founder of <a href="https://www.bugsee.com">Bugsee</a>. In previous life hacked and managed teams at Amazon, TI, Palm/HP, Zoran, Intel, Dishero<hr>
      <a href="https://linkedin.com/in/finik">https://linkedin.com/in/finik</a><br>
      <a href="https://angel.co/finik">https://angel.co/finik</a><br>
      <a href="https://twitter.com/finik">https://twitter.com/finik</a><br>
      <a href="https://github.com/finik">https://github.com/finik</a><br>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/12/24/Auzzle-Puzzle/">Auzzle Puzzle</a>
          </li>
        
          <li>
            <a href="/2017/03/20/iOS-Crash-Symbolication-for-dummies-Part-2/">iOS Crash Symbolication for dummies Part 2</a>
          </li>
        
          <li>
            <a href="/2017/03/08/iOS-Crash-Symbolication-for-dummies-Part-1/">iOS Crash Symbolication for dummies Part 1</a>
          </li>
        
          <li>
            <a href="/2016/08/30/Managing-iOS-build-configurations/">Managing iOS build configurations</a>
          </li>
        
          <li>
            <a href="/2016/08/28/iOS-Ad-hoc-distribution-using-Amazon-S3/">iOS Ad-hoc distribution using Amazon S3</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/amazon/">amazon</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws/">aws</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws-build-ios/">aws, build, ios</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bidi/">bidi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/build/">build</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/elastic-beanstalk/">elastic beanstalk</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hebrew/">hebrew</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios-build-tesflight/">ios, build, tesflight</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios-symbolication-dsym/">ios, symbolication, dsym</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kernel/">kernel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/octopress/">octopress</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/puzzles-hobby/">puzzles, hobby</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rant/">rant</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rss/">rss</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/amazon/" style="font-size: 10.00px;">amazon</a><a href="/tags/aws/" style="font-size: 10.00px;">aws</a><a href="/tags/aws-build-ios/" style="font-size: 10.00px;">aws, build, ios</a><a href="/tags/bidi/" style="font-size: 10.00px;">bidi</a><a href="/tags/blog/" style="font-size: 20.00px;">blog</a><a href="/tags/build/" style="font-size: 10.00px;">build</a><a href="/tags/elastic-beanstalk/" style="font-size: 10.00px;">elastic beanstalk</a><a href="/tags/git/" style="font-size: 10.00px;">git</a><a href="/tags/google/" style="font-size: 10.00px;">google</a><a href="/tags/hebrew/" style="font-size: 10.00px;">hebrew</a><a href="/tags/hexo/" style="font-size: 10.00px;">hexo</a><a href="/tags/ios-build-tesflight/" style="font-size: 10.00px;">ios, build, tesflight</a><a href="/tags/ios-symbolication-dsym/" style="font-size: 15.00px;">ios, symbolication, dsym</a><a href="/tags/kernel/" style="font-size: 10.00px;">kernel</a><a href="/tags/nginx/" style="font-size: 10.00px;">nginx</a><a href="/tags/octopress/" style="font-size: 10.00px;">octopress</a><a href="/tags/puzzles-hobby/" style="font-size: 10.00px;">puzzles, hobby</a><a href="/tags/rant/" style="font-size: 10.00px;">rant</a><a href="/tags/rss/" style="font-size: 10.00px;">rss</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/10/">October 2010</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- test -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-5367834286297597"
     data-ad-slot="1326752408"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Dmitry Fink<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/resume" class="mobile-nav-link">Resume</a>
  
    <a href="/contact" class="mobile-nav-link">Contact</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'finiknet';
  
  var disqus_url = 'http://finik.net/2016/08/28/iOS-Ad-hoc-distribution-using-Amazon-S3/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>


  </div>
</body>
</html>